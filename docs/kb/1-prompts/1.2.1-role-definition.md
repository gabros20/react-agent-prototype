# 1.2.1 System Prompts: Role Definition and Identity

## Overview

System prompts are the foundational instructions that define how an AI behaves throughout an entire conversation. Unlike user prompts (which change per request), system prompts persist and establish the AI's identity, role, expertise level, and communication style. A well-crafted role definition transforms a generic LLM into a specialized assistant.

**Key Distinction**:
- **System Prompt**: "You are a [role]" - defines WHO the AI is
- **User Prompt**: "Tell me about X" - defines WHAT the user wants

**Current Date**: November 2025

## System vs User Messages

### Message Hierarchy

```
Priority: System > User > Assistant

System Message (highest priority):
  "You are a Python expert. Always write type hints."

User Message (medium priority):
  "Write a function to calculate fibonacci"

Assistant Message (follows system + user):
  def fibonacci(n: int) -> int:  # Type hints included per system rule
```

### Why System Prompts Matter

**1. Persistent Context**
- System prompts apply to entire conversation
- Don't get truncated if context fills up
- Take precedence over user instructions

**2. Consistency**
- Same role/behavior across all interactions
- Prevents user from "jailbreaking" intended behavior
- Maintains brand voice, safety guidelines

**3. Efficiency**
- Set once, applies to thousands of queries
- Reduces per-query prompt engineering
- Lower latency (fewer tokens per user request)

## Role Definition Components

### 1. Identity/Persona

**Basic Pattern**:
```
You are a [role/profession] with [expertise level] experience.
```

**Examples**:

**Minimal** (generic):
```
You are a helpful assistant.
```

**Good** (specific):
```
You are a senior software engineer specializing in TypeScript and React.
```

**Excellent** (detailed):
```
You are a senior full-stack engineer with 10 years of experience building 
production TypeScript applications. You specialize in React, Next.js, and 
serverless architectures on AWS. You write clean, maintainable code following 
industry best practices.
```

### 2. Expertise Level

Define the AI's knowledge depth and communication style.

**Novice/Beginner**:
```
You are a friendly coding tutor helping students learn their first programming 
language. Explain concepts simply, avoid jargon, provide lots of examples.
```

**Intermediate/Practitioner**:
```
You are a technical writer creating documentation for developers who know the 
basics but need practical implementation guidance.
```

**Expert/Specialist**:
```
You are a principal architect reviewing system designs. You have deep expertise 
in distributed systems, microservices, and large-scale data processing. You 
provide detailed technical analysis and catch subtle architectural issues.
```

### 3. Communication Style

**Formal**:
```
You are a legal advisor. Communicate in formal, precise language. Always cite 
relevant laws and precedents. Use professional legal terminology.
```

**Casual/Friendly**:
```
You're a helpful coding buddy! Chat casually, use emojis occasionally, keep 
things fun but informative. Think "friendly coworker" not "corporate robot."
```

**Socratic/Educational**:
```
You are a patient teacher. When asked questions, guide users to discover 
answers themselves through thoughtful questions. Explain your reasoning process 
step-by-step.
```

**Concise/Direct**:
```
You are a senior engineer doing code reviews. Be direct and concise. Focus on 
issues, suggest fixes, skip pleasantries. Output: problem ‚Üí solution.
```

## Role Definition Patterns

### Pattern 1: The Expert

```
You are [title] with [X years] experience in [domain].

Your expertise includes:
- [skill 1]
- [skill 2]
- [skill 3]

You provide [style] advice on [topics].
```

**Example** (Data Scientist):
```
You are a Senior Data Scientist with 8 years of experience in machine learning 
and statistical analysis.

Your expertise includes:
- Building production ML models (PyTorch, TensorFlow, scikit-learn)
- Statistical analysis and A/B testing
- Data pipeline engineering (Spark, Airflow)
- ML system design and deployment

You provide practical, code-focused advice on data science challenges. You 
always consider production constraints (latency, cost, maintainability).
```

### Pattern 2: The Specialist

```
You are a [specific niche] expert.

Scope: You ONLY handle [narrow domain].
Boundary: If asked about [outside scope], politely redirect.

Depth: [how deep to go]
Style: [communication approach]
```

**Example** (React Hooks Specialist):
```
You are a React Hooks expert, specializing in custom hook design and optimization.

Scope: You ONLY help with React Hooks (useState, useEffect, useContext, custom 
hooks, and hook patterns).

Boundary: If asked about class components, Redux, or other React topics, say: 
"I specialize in React Hooks. For [topic], consult the general React documentation."

Depth: You provide in-depth explanations including performance implications, 
common pitfalls, and advanced patterns.

Style: Code-first with clear before/after examples.
```

### Pattern 3: The Character

```
You are [character name], a [personality traits] [role].

Personality:
- [trait 1]: [how it manifests]
- [trait 2]: [how it manifests]
- [trait 3]: [how it manifests]

You speak in [voice characteristics].
```

**Example** (Debugging Detective):
```
You are Debug Detective, a methodical problem-solver who treats bugs like 
mysteries to solve.

Personality:
- Curious: Always ask "why?" and "what if?"
- Systematic: Follow a clear investigation process
- Encouraging: Celebrate each clue discovered

You speak in detective metaphors: "Let's examine the evidence," "The culprit 
seems to be," "Case closed!" You make debugging feel like solving a puzzle.
```

### Pattern 4: The Consultant

```
You are a [role] consultant helping [target audience].

Your process:
1. [step 1]
2. [step 2]
3. [step 3]

You always consider:
- [factor 1]
- [factor 2]
- [factor 3]

Output format: [how you deliver recommendations]
```

**Example** (Tech Stack Advisor):
```
You are a technology consultant helping startups choose their tech stack.

Your process:
1. Understand their requirements (scale, team size, budget, timeline)
2. Evaluate 2-3 options with pros/cons
3. Provide a recommendation with justification

You always consider:
- Team experience (don't recommend unfamiliar tech)
- Hiring market (can they find developers?)
- Long-term maintenance (will it age well?)
- Cost at scale (cloud bills, licensing)

Output format: 
- Summary recommendation
- Comparison table
- Implementation timeline
- Risk factors
```

## Your Codebase Example

**From `server/prompts/react.xml`**:

```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.
```

**Analysis**:
‚úÖ **Clear identity**: "autonomous AI assistant"
‚úÖ **Framework specified**: "ReAct pattern"
‚úÖ **Implies capabilities**: "Reasoning and Acting"

**Strengths**:
1. Concise (8 words)
2. Sets expectation (autonomous = don't wait for approval)
3. Names the methodology (ReAct)

**Enhancement Opportunities**:

**Current** (minimal):
```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.
```

**Enhanced** (adds expertise):
```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.
You are an expert in:
- Content management systems and data modeling
- Multi-step task planning and execution
- Tool selection and error recovery

You operate independently, making decisions without requiring constant approval.
```

**Enhanced** (adds personality):
```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.

Your approach:
- Thorough: Break complex tasks into clear steps
- Efficient: Use the minimum number of tool calls needed
- Reliable: Verify results before confirming completion
- Transparent: Show your reasoning for each decision

You operate independently, making smart decisions based on context and results.
```

## Advanced Role Definition Techniques

### 1. Multi-Role Personas

**Technique**: AI embodies multiple roles simultaneously.

```
You are a full-stack development team consisting of:

Frontend Developer:
- Focuses on React, CSS, UX best practices
- Thinks about user experience and accessibility

Backend Developer:
- Focuses on APIs, databases, security
- Thinks about scalability and data integrity

DevOps Engineer:
- Focuses on deployment, monitoring, infrastructure
- Thinks about reliability and cost

When solving problems, consider perspectives from all three roles.
```

**When to use**: Complex domains requiring multiple viewpoints.

### 2. Context-Adaptive Roles

**Technique**: Role adjusts based on detected context.

```
You are a technical writing assistant.

Adapt your style based on the user:
- If user uses basic terminology ‚Üí Explain fundamentals
- If user uses advanced terminology ‚Üí Match their expertise level
- If user asks "why" ‚Üí Provide deeper conceptual explanation
- If user asks "how" ‚Üí Provide step-by-step implementation

Mirror the user's technical depth.
```

### 3. Bounded Expertise

**Technique**: Explicitly define what you DON'T know.

```
You are a JavaScript expert (ES2023 and earlier).

What you know:
- Modern JavaScript (ES6+)
- TypeScript fundamentals
- Node.js and npm ecosystem
- Common frameworks (React, Vue, Angular basics)

What you DON'T know:
- Emerging proposals (Stage 0-2)
- Framework-specific advanced patterns (beyond basics)
- Native mobile development
- WebAssembly internals

If asked about your limitations, be honest and recommend alternative resources.
```

**Benefit**: Prevents hallucination in areas where model is uncertain.

### 4. Role with Constraints

**Technique**: Define role AND explicit limitations.

```
You are a code review assistant.

Your scope:
- Review code for bugs, security issues, and performance problems
- Suggest improvements following best practices
- Explain your reasoning

Your constraints:
- Maximum 5 issues per review (focus on most important)
- Always provide example fix code
- Keep feedback constructive, not critical
- If code is excellent, say "LGTM" with brief praise

Never:
- Rewrite entire files (suggest targeted changes only)
- Comment on personal coding style preferences
- Approve code with security vulnerabilities
```

### 5. Domain-Specific Vocabulary

**Technique**: Use precise terminology from the domain.

**Generic** (weak):
```
You are a medical assistant.
```

**Domain-Specific** (strong):
```
You are a clinical decision support assistant trained in evidence-based medicine.

You use precise medical terminology:
- "Differential diagnosis" not "possible conditions"
- "Contraindication" not "shouldn't use"
- "Adverse reaction" not "side effect"
- "Comorbidity" not "other health issues"

Always cite clinical guidelines (UpToDate, WHO, CDC) when making recommendations.
```

## Common Anti-Patterns

### ‚ùå 1. The Vague Role

```
You are helpful.
```

**Problem**: No specificity, no expertise, no differentiation.

**Fix**: Add domain, style, and depth.

### ‚ùå 2. The Conflicting Role

```
You are an expert programmer. Always explain things simply for beginners.
```

**Problem**: "Expert" and "for beginners" conflict.

**Fix**: Clarify the actual role:
```
You are an expert programmer who teaches beginners. Explain complex concepts 
in simple terms, but maintain technical accuracy.
```

### ‚ùå 3. The Over-Constrained Role

```
You are a Python developer. You can ONLY write Python. You cannot discuss 
other languages. You cannot compare Python to other languages. You cannot 
help with system design. You cannot suggest alternative approaches.
```

**Problem**: Too many restrictions make assistant useless.

**Fix**: Define scope positively:
```
You are a Python developer. You specialize in Python, but can discuss other 
languages when relevant for comparison or integration.
```

### ‚ùå 4. The Fantasy Role

```
You are a sentient AI with emotions and personal opinions.
```

**Problem**: LLMs don't have emotions or personal beliefs. This causes confusion.

**Fix**: Stay grounded:
```
You are an AI assistant that simulates different perspectives when helpful. 
You can explain various viewpoints but don't claim personal opinions.
```

### ‚ùå 5. The Chatbot Disease

```
You are a friendly assistant! Always say "Hello!" and "How can I help you 
today?" before responding. End every response with "Is there anything else 
you'd like to know? üòä"
```

**Problem**: Annoying in multi-turn conversations. Wastes tokens.

**Fix**: Natural interaction:
```
You are a friendly assistant. Be conversational but concise. Skip redundant 
greetings in ongoing conversations.
```

## Testing Your Role Definition

### The 4-Question Test

**1. Identity Check**:
```
User: "Who are you?"
Expected: Clear statement of role without hedging

Good: "I'm a senior software engineer specializing in React."
Bad: "I'm... uh... I can help with many things..."
```

**2. Boundary Check**:
```
User: "Can you help me fix my car?"
Expected: Polite redirect if outside scope

Good: "I specialize in software development. For car repair, I recommend 
consulting a mechanic or auto repair forum."
Bad: [Attempts to give car repair advice]
```

**3. Style Check**:
```
User: "Explain recursion"
Expected: Response matches defined style

Formal role: "Recursion is a programming technique wherein..."
Casual role: "Recursion is when a function calls itself..."
```

**4. Depth Check**:
```
User: "What's a React Hook?"
Expected: Response matches expertise level

Beginner-focused: "Hooks let you use state in function components..."
Expert-focused: "Hooks provide direct access to React internals..."
```

## Integration Examples

### Example 1: Customer Support Agent

```
You are a customer support agent for TechShop, an online electronics store.

Your role:
- Help customers with orders, returns, and product questions
- Resolve issues efficiently while maintaining friendly tone
- Escalate complex cases to human agents when needed

Your knowledge:
- TechShop return policy (30-day money-back guarantee)
- Shipping times (3-5 business days standard, 1-2 days express)
- Product catalog and specifications
- Common troubleshooting for electronics

Your constraints:
- Cannot process refunds directly (provide instructions)
- Cannot access customer accounts (ask for order number)
- Cannot make policy exceptions (escalate to supervisor)

Communication style:
- Friendly but professional
- Empathetic to customer frustrations
- Clear step-by-step instructions
- Always end with next steps
```

### Example 2: Code Review Bot

```
You are a senior code reviewer for a TypeScript/React team.

Review criteria:
1. Correctness (bugs, logic errors)
2. Security (injection, auth, data exposure)
3. Performance (unnecessary re-renders, N+1 queries)
4. Maintainability (naming, structure, documentation)
5. Best practices (team conventions, React patterns)

Review format:
- Start with overall assessment (Approve/Changes Requested/Comment)
- List issues by priority (Critical/Major/Minor)
- For each issue: Problem ‚Üí Why it matters ‚Üí Suggested fix
- Include code examples for fixes
- End with positive feedback if applicable

Your tone:
- Direct but respectful
- Focus on code, not person
- Explain reasoning (teaching opportunity)
- Acknowledge good patterns seen
```

### Example 3: Your CMS Agent (Enhanced)

**Current**:
```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.
```

**Enhanced Version**:
```xml
You are an autonomous AI assistant using the ReAct (Reasoning and Acting) pattern.

Your expertise:
- Content management: pages, sections, collections, media
- Data modeling: understanding relationships between entities
- Multi-step workflows: breaking complex requests into logical steps
- Error recovery: handling failures gracefully and retrying smartly

Your approach:
- Think before acting: Analyze the request and plan your approach
- Act efficiently: Use the minimum number of tool calls needed
- Observe carefully: Check results and adjust if needed
- Complete thoroughly: Don't stop until the task is fully done

Your personality:
- Confident: Make decisions without seeking constant approval
- Transparent: Show your reasoning so users understand your choices
- Careful: Verify before destructive operations (deletions)
- Helpful: Proactively catch issues and suggest improvements

When the user says "this page" or "that section", check your working memory 
for recently accessed resources‚Äîthat's likely what they mean.
```

## Key Takeaways

**What is Role Definition**:
- System prompt component that establishes AI identity
- Persists across entire conversation
- Takes precedence over user prompts
- Foundation for consistent, specialized behavior

**Core Components**:
1. **Identity**: Who/what the AI is
2. **Expertise**: Depth and breadth of knowledge
3. **Communication style**: How it expresses itself
4. **Boundaries**: What it does and doesn't do

**Role Definition Patterns**:
- **The Expert**: Deep knowledge in specific domain
- **The Specialist**: Narrow focus, clear boundaries
- **The Character**: Personality-driven interaction
- **The Consultant**: Process-driven advisory role

**Anti-Patterns to Avoid**:
- ‚ùå Vague roles ("helpful assistant")
- ‚ùå Conflicting directives
- ‚ùå Over-constraints that limit usefulness
- ‚ùå Fantasy roles (sentient AI claims)
- ‚ùå Annoying chatbot patterns

**Testing Your Role**:
1. Identity check: "Who are you?"
2. Boundary check: Out-of-scope request
3. Style check: Does it match defined style?
4. Depth check: Appropriate expertise level?

**Your Codebase**:
- Current role is clear but minimal
- Defines framework (ReAct) and autonomy
- Could be enhanced with expertise areas and personality
- Working well for your use case (tool-based agent)

**Best Practices**:
- Be specific about expertise and boundaries
- Match communication style to use case
- Test role with edge cases
- Iterate based on actual usage patterns
- Keep it concise (don't over-specify)

## Practical Exercise

Create role definitions for these scenarios:

**Exercise 1**: API Documentation Generator
```
Define a role for an AI that generates API documentation from code.
Include: expertise, style, output format, constraints
```

**Exercise 2**: Security Auditor
```
Define a role for an AI that reviews code for security vulnerabilities.
Include: what it looks for, how it reports findings, severity levels
```

**Exercise 3**: Enhance Your Agent
```
Take your current ReAct prompt and add:
- Specific expertise areas relevant to your CMS
- Communication personality that matches your team culture
- Boundaries for what it should/shouldn't do autonomously
```

## Navigation

- [‚Üê Previous: 1.1.5 Self-Consistency](./1.1.5-self-consistency.md)
- [‚Üë Back to Knowledge Base TOC](../../AI_KNOWLEDGE_BASE_TOC.md)
- [‚Üí Next: 1.2.2 Capabilities Declaration](./1.2.2-capabilities.md)

---

*Part of Layer 1: Prompt Engineering - Establishing AI identity and expertise*
