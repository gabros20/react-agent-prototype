# 6.3.5 When to Use Tree of Thoughts

## TL;DR

Tree of Thoughts is optimal for complex reasoning tasks with evaluable intermediate states and multiple valid approaches—use it for math, logic puzzles, and strategic planning; avoid for simple queries, time-critical tasks, or problems without clear state evaluation.

- **Status**: ✅ Complete
- **Last Updated**: 2025-12-12
- **Prerequisites**: [6.3.1 Multi-Path Exploration](./6.3.1-multi-path.md)
- **Grounded In**: Tree of Thoughts (2023), Production Agent Patterns, Search Algorithm Selection

## Overview

Tree of Thoughts provides dramatic improvements on specific problem types but adds significant overhead. This guide helps determine when ToT's benefits outweigh its costs.

**Rule of Thumb**: If Chain-of-Thought achieves >80% success rate, ToT overhead is likely not justified.

**Date Verified**: 2025-12-12

## Decision Framework

### ✅ Use Tree of Thoughts When:

1. **Complex Reasoning Required**
   - Multiple steps needed
   - Single-path often fails
   - Example: Game of 24, logic puzzles

2. **Multiple Valid Approaches**
   - Different strategies could work
   - Exploring alternatives valuable
   - Example: Algorithm design, proof strategies

3. **Evaluable Intermediate States**
   - Can score partial solutions
   - Know when approaching solution
   - Example: Math problems, code generation

4. **Error Recovery Important**
   - Early mistakes should be recoverable
   - Cost of failure is high
   - Example: Multi-step planning

5. **Time Budget Available**
   - Latency tolerance > 5-10 seconds
   - Quality over speed
   - Example: Batch processing, offline analysis

### ❌ Don't Use Tree of Thoughts When:

1. **Simple, Direct Tasks**
   - Clear single approach
   - CoT success rate >80%
   - Example: Translation, summarization

2. **Real-Time Requirements**
   - Need response <2 seconds
   - User waiting interactively
   - Example: Chat responses

3. **No Intermediate Evaluation**
   - Can't assess partial progress
   - Only final answer matters
   - Example: Creative writing, open-ended generation

4. **Cost-Constrained**
   - Tight token budget
   - High volume, low margin
   - Example: Bulk processing at scale

5. **No Backtracking Value**
   - Sequential dependencies
   - Can't undo earlier steps
   - Example: Real-world actions, database mutations

## Task Type Recommendations

| Task Type | Recommended Method | Reasoning |
|-----------|-------------------|-----------|
| Simple Q&A | Direct prompt | No reasoning needed |
| Basic reasoning | Chain-of-Thought | Sufficient for most |
| Math problems | Self-Consistency | Voting works well |
| Complex puzzles | Tree of Thoughts | Need exploration |
| Code generation | ToT or LATS | Multiple approaches |
| Strategic planning | Tree of Thoughts | Alternatives valuable |
| Creative writing | Self-Refine | Evaluation subjective |
| Classification | Direct prompt | Single answer |

## Cost-Benefit Analysis

```
┌─────────────────────────────────────────────────────────────┐
│              ToT COST-BENEFIT ANALYSIS                       │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  BENEFITS:                                                   │
│  + 70% improvement on hard reasoning (4%→74% Game of 24)    │
│  + Explores alternatives before committing                   │
│  + Recovers from wrong early choices                        │
│  + Finds solutions CoT misses                               │
│                                                              │
│  COSTS:                                                      │
│  - 10-50x token usage vs single CoT                         │
│  - 5-20x latency increase                                   │
│  - Implementation complexity                                 │
│  - Evaluation function required                             │
│                                                              │
│  BREAK-EVEN CALCULATION:                                     │
│  ─────────────────────────                                   │
│  If CoT success rate = P_cot                                │
│  ToT success rate = P_tot                                   │
│  ToT cost multiplier = C                                    │
│                                                              │
│  ToT worthwhile when:                                        │
│    P_tot / P_cot > C × (value_of_success)                  │
│                                                              │
│  Example: If CoT=20%, ToT=80%, C=10x                        │
│    4x success improvement vs 10x cost                       │
│    Worth it if failure cost > 2.5x success value            │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

## Quick Decision Checklist

```
Should I use Tree of Thoughts?

□ Is CoT success rate <60%? → Consider ToT
□ Can I evaluate partial states? → Required for ToT
□ Do I have time budget >5s? → Needed for exploration
□ Are there multiple approaches? → ToT helps
□ Is failure costly? → ToT reduces failure

If 4+ checked → Use ToT
If 2-3 checked → Try ToT on sample, measure
If 0-1 checked → Use simpler method
```

## Key Takeaways

1. **ToT is powerful but expensive**: Use when benefits outweigh 10-50x cost
2. **Evaluation is essential**: Don't use if you can't score intermediate states
3. **80% CoT threshold**: If CoT works most of the time, skip ToT
4. **Latency matters**: ToT inappropriate for real-time applications
5. **Start simple**: Try CoT/Self-Consistency before ToT

## References

1. **Yao et al.** (2023). "Tree of Thoughts". NeurIPS 2023.
2. **Wang et al.** (2023). "Self-Consistency". ICLR 2023.
3. **Production ML** (2024). "When to Use Complex Reasoning".

**Related Topics**: [6.3.1 Multi-Path](./6.3.1-multi-path.md), [6.1.1 Plan Separation](./6.1.1-separation.md)

**Layer Index**: [Layer 6: Planning & Orchestration](../AI_KNOWLEDGE_BASE_TOC.md#layer-6-planning--orchestration)
